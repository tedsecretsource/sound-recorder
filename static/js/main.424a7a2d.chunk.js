(this["webpackJsonpsound-recorder"]=this["webpackJsonpsound-recorder"]||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),c=n(8),a=n.n(c),i=(n(14),n(7)),s=n(9),u=n(2),d=n(4),l=(n(15),n(0)),m=function(e){var t=e.streamURL,n=e.name,r=e.onDeleteHandler,o=e.onEditNameHandler,c=e.id;return Object(l.jsxs)("article",{id:c,children:[Object(l.jsx)("audio",{controls:!0,src:t,preload:"auto",role:"application",children:"Sorry, your browser doesn't support recording audio."}),Object(l.jsxs)("p",{children:[Object(l.jsx)("span",{className:"name",role:"presentation",children:n}),Object(l.jsx)("button",{onClick:function(e){o(e)},className:"editName",title:"Click to edit name","aria-label":"Click to edit name",children:"\u270f\ufe0f"})]}),Object(l.jsx)("button",{onClick:function(e){r(e)},className:"delete",children:"Delete"})]})},f=(n(17),function(e){var t,n,o,c,a=e.stream,i=e.barColor,s=Object(r.useRef)(null),u=Object(r.useRef)(null);Object(r.useEffect)((function(){return m(a),u.current=requestAnimationFrame(d),function(){cancelAnimationFrame(u.current)}}),[]);var d=function e(t){s.current&&(f(t,s.current),u.current=requestAnimationFrame(e))},m=function(e){var r;r||(r=new(window.AudioContext||window.webkitAudioContext));var c=r.createMediaStreamSource(e);(t=r.createAnalyser()).fftSize=256,o=t.frequencyBinCount,n=new Uint8Array(o),c.connect(t)},f=function(e,r){if(c!==e){var a=r.getContext("2d"),s=r.width,u=r.height;t.getByteTimeDomainData(n);var d,l=s/o,m=0;a.clearRect(0,0,s,u);for(var f=0;f<o;f++)d=n[f],a.fillStyle="rgb(".concat(i[0],", ").concat(i[1],", ").concat(i[2],")"),a.fillRect(m,u,l,0-d/2),m+=l+1;c=e}};return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("canvas",{ref:s,className:"visualizer"})})}),b=(n(18),function(e){var t=e.stream,n=Object(r.useState)(null),o=Object(u.a)(n,2),c=o[0],a=o[1],i=Object(r.useState)(!1),s=Object(u.a)(i,2),l=s[0],m=s[1],f=Object(r.useState)([]),b=Object(u.a)(f,2),j=b[0],p=b[1],O="audio/webm",h=[];Object(r.useEffect)((function(){try{g(t,"audio/webm")}catch(e){console.log("This browser does not support mime type: audio/webm")}try{g(t,"audio/mp4")}catch(e){console.log("This browser does not support mime type: audio/mp4")}}),[]);var g=function(e,t){O=t;var n=new MediaRecorder(e,{mimeType:t});n.onstart=v,n.onstop=w,n.ondataavailable=x,a(n)},v=function(){console.log("started recording"),m(!0)},w=function(){var e=new Blob(h,{type:O}),t=window.URL.createObjectURL(e);console.log("stopped recording"),p((function(e){return[].concat(Object(d.a)(e),[{stream:t,name:(new Date).toISOString().split(".")[0].split("T").join(" "),id:"id".concat(window.performance.now().toString())}])})),h=[],m(!1)},x=function(e){h.push(e.data)};return{recorder:c,recordings:j,setRecordings:p,isRecording:l}}),j=function(e){var t=e.stream,n=b({stream:t}),o=n.recorder,c=n.recordings,a=n.setRecordings,i=n.isRecording,s="record-play",u=Object(r.useMemo)((function(){return i?"".concat(s," recording-audio"):s}),[i]),j=Object(r.useMemo)((function(){return i?"Stop":"Record"}),[i]),p=function(e){var t,n=e.target.parentNode.parentNode.attributes.id.value,r=Object(d.a)(c),o=c.filter((function(e){return e.id===n&&e})),i=c.indexOf(o[0]),s=null!==(t=window.prompt("Enter a new name",o[0].name))&&void 0!==t?t:o[0].name;o[0].name=s,r.splice(i,1,o[0]),a(r)},O=function(e){var t=e.target.parentNode.attributes.id.value,n=window.confirm("Are you sure you want to delete this recording?");if(!0===n){var r=c.filter((function(e){return t!==e.id}));e.target.parentNode.classList.add("vanish"),setTimeout((function(){a(Object(d.a)(r))}),900)}};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(f,{stream:t,barColor:[18,124,85]}),Object(l.jsx)("button",{onClick:function(){i?o.stop():o.start(1e3)},className:u,children:j}),Object(l.jsx)("section",{children:c.map((function(e,t){return Object(l.jsx)(m,{streamURL:e.stream,name:e.name,id:e.id,onDeleteHandler:O,onEditNameHandler:p},e.id)}))})]})};n(19);var p=function(){var e=Object(r.useState)(null),t=Object(u.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(null),a=Object(u.a)(c,2);a[0],a[1],Object(r.useEffect)((function(){d()}),[]);var d=function(){var e=Object(s.a)(Object(i.a)().mark((function e(){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:navigator.mediaDevices.getUserMedia({video:!1,audio:!0}).then((function(e){o(e)})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("header",{children:Object(l.jsx)("h1",{children:"Sound Recorder"})}),Object(l.jsx)("main",{children:null===n?Object(l.jsx)("button",{className:"record-play",children:"Loading\u2026"}):Object(l.jsx)(j,{stream:n})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var O=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,21)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),r(e),o(e),c(e),a(e)}))};a.a.render(Object(l.jsx)(o.a.StrictMode,{children:Object(l.jsx)(p,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),O()}],[[20,1,2]]]);
//# sourceMappingURL=main.424a7a2d.chunk.js.map
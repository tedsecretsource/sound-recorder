(this["webpackJsonpsound-recorder"]=this["webpackJsonpsound-recorder"]||[]).push([[0],{24:function(e,t,n){},25:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),c=n(19),i=n.n(c),a=(n(24),n(4)),s=n(5),d=(n(25),n(3)),u=function(e){var t=e.streamURL,n=e.name,r=e.onDeleteHandler,o=e.onEditNameHandler,c=e.id;return Object(d.jsxs)("article",{id:c,children:[Object(d.jsx)("audio",{controls:!0,src:t,preload:"auto",role:"application",children:"Sorry, your browser doesn't support recording audio."}),Object(d.jsxs)("p",{children:[Object(d.jsx)("span",{className:"name",role:"presentation",children:n}),Object(d.jsx)("button",{onClick:function(e){o(e)},className:"editName",title:"Click to edit name","aria-label":"Click to edit name",children:"\u270f\ufe0f"})]}),Object(d.jsx)("button",{onClick:function(e){r(e)},className:"delete",children:"Delete"})]})},l=(n(27),function(e){var t,n,o,c,i=e.stream,a=e.barColor,s=Object(r.useRef)(null),u=Object(r.useRef)(null);Object(r.useEffect)((function(){return j(i),u.current=requestAnimationFrame(l),function(){cancelAnimationFrame(u.current)}}),[]);var l=function e(t){s.current&&(b(t,s.current),u.current=requestAnimationFrame(e))},j=function(e){var r;r||(r=new(window.AudioContext||window.webkitAudioContext));var c=r.createMediaStreamSource(e);(t=r.createAnalyser()).fftSize=256,o=t.frequencyBinCount,n=new Uint8Array(o),c.connect(t)},b=function(e,r){if(c!==e){var i=r.getContext("2d"),s=r.width,d=r.height;t.getByteTimeDomainData(n);var u,l=s/o,j=0;i.clearRect(0,0,s,d);for(var b=0;b<o;b++)u=n[b],i.fillStyle="rgb(".concat(a[0],", ").concat(a[1],", ").concat(a[2],")"),i.fillRect(j,d,l,0-u/2),j+=l+1;c=e}};return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("canvas",{ref:s,className:"visualizer"})})}),j=(n(28),function(e){var t=e.mediaRecorder,n=Object(r.useState)("inactive"),o=Object(a.a)(n,2),c=(o[0],o[1]),i=Object(r.useState)([]),j=Object(a.a)(i,2),b=j[0],m=j[1],f="record-play",h=f,p=Object(r.useMemo)((function(){return[]}),[]);Object(r.useEffect)((function(){t&&(t.onstart=function(){console.log("started recording")},t.onstop=function(){console.log("stopped recording")},t.ondataavailable=function(e){p.push(e.data)})}),[t,p]);var O=function(){"inactive"===t.state?t.start(1e3):(t.stop(),function(){var e=new Blob(p,{type:t.mimeType}),n=window.URL.createObjectURL(e);m((function(e){return[].concat(Object(s.a)(e),[{stream:n,name:(new Date).toISOString().split(".")[0].split("T").join(" "),id:"id".concat(window.performance.now().toString())}])})),p=[]}()),c(t.state)},x=function(e){var t,n=e.target.parentNode.parentNode.attributes.id.value,r=Object(s.a)(b),o=b.filter((function(e){return e.id===n&&e})),c=b.indexOf(o[0]),i=null!==(t=window.prompt("Enter a new name",o[0].name))&&void 0!==t?t:o[0].name;o[0].name=i,r.splice(c,1,o[0]),m(r)},g=function(e){var t=e.target.parentNode.attributes.id.value,n=window.confirm("Are you sure you want to delete this recording?");if(!0===n){var r=b.filter((function(e){return t!==e.id}));e.target.parentNode.classList.add("vanish"),setTimeout((function(){m(Object(s.a)(r))}),900)}};return null===t?Object(d.jsx)("button",{className:"record-play",title:"Please either allow or decline the use of your microphone",children:"Loading\u2026"}):(h="recording"===t.state?"".concat(f," recording-audio"):f,Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(l,{stream:t.stream,barColor:[18,124,85]}),Object(d.jsx)("button",{onClick:O,className:h,children:"recording"===t.state?"Stop":"Record"}),Object(d.jsx)("section",{children:b.map((function(e,t){return Object(d.jsx)(u,{streamURL:e.stream,name:e.name,id:e.id,onDeleteHandler:g,onEditNameHandler:x},e.id)}))})]}))}),b=function(){var e=Object(r.useState)(null),t=Object(a.a)(e,2),n=t[0],o=t[1];return Object(r.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!1,audio:!0}).then((function(e){try{o(new MediaRecorder(e,{mimeType:"audio/webm"}))}catch(t){console.log("This browser does not support mime type: audio/webm")}try{o(new MediaRecorder(e,{mimeType:"audio/mp4"}))}catch(t){console.log("This browser does not support mime type: audio/mp4")}})).catch((function(e){console.log("You need to allow access to your microphone to use this app")}))}),[]),Object(d.jsx)(j,{mediaRecorder:n})},m=(n(29),function(){return Object(d.jsxs)("footer",{children:[Object(d.jsx)("p",{children:"\xa9 Copyright Secret Source Technology 2022"}),Object(d.jsx)("p",{children:Object(d.jsx)("a",{href:"./terms_of_use",children:"Terms of Use"})}),Object(d.jsx)("p",{children:Object(d.jsx)("a",{href:"https://github.com/tedsecretsource/sound-recorder/blob/main/LICENSE.md",target:"_blank",rel:"noreferrer",children:"License"})})]})});n(30);var f=function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("header",{children:Object(d.jsx)("h1",{children:"Sound Recorder"})}),Object(d.jsx)("main",{children:Object(d.jsx)(b,{})}),Object(d.jsx)(m,{})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var h=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,32)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),o(e),c(e),i(e)}))},p=n(18),O=n(2);function x(){var e=Object(O.n)();return console.error(e),Object(d.jsxs)("div",{id:"error-page",children:[Object(d.jsx)("h1",{children:"Oops!"}),Object(d.jsx)("p",{children:"Sorry, an unexpected error has occurred."}),Object(d.jsx)("p",{children:Object(d.jsx)("i",{children:e.statusText||e.message})})]})}var g=Object(p.a)([{path:"/",element:Object(d.jsx)(f,{}),errorElement:Object(d.jsx)(x,{})},{path:"/sound-recorder/",element:Object(d.jsx)(f,{}),errorElement:Object(d.jsx)(x,{})}]);i.a.render(Object(d.jsx)(o.a.StrictMode,{children:Object(d.jsx)(O.b,{router:g})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),h()}},[[31,1,2]]]);
//# sourceMappingURL=main.85f10ad4.chunk.js.map